import mongoose from "mongoose";
import config from "../config.js";
import logger from "../helpers/logger.js";

const initDb = async () => {
  mongoose.connect(`${config.MONGO.CONN_STRING}`, {
    useNewUrlParser: true,
    useUnifiedTopology: true,
  });

  const connection = mongoose.connection;
  connection.on("error", (err) => {
    logger.error(`Error ${err}`);
  });
  connection.once("open", () => {
    logger.info("Connected to Mongo successfully");
  });
};

export default initDb;
