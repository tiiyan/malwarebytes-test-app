import { useState } from "react";
import DeviceModal from "./DeviceModal";

const Device = (props) => {
  const device = props.device;
  const [showModal, setShowModal] = useState(false);

  const getItemCount = (_id) => {
    return (props.cart.find((c) => c._id === _id) || {}).count || 0;
  };

  return (
    <div className="container">
      <div className="row">
        <div className="col-lg-1">{device.index}</div>
        <div className="col-lg-1">
          <strong>{device.brand}</strong>
        </div>
        <div className="col-lg-2">
          <strong>{device.name}</strong>
        </div>
        <div className="col-lg-1">
          <p style={{ borderStyle: "solid" }}>{device.quantity - getItemCount(device._id)}</p>
        </div>
        <div className="col-lg-1">
          <button onClick={() => setShowModal(true)} type="button" className="btn">
            ...
          </button>
        </div>
      </div>
      <div>
        <DeviceModal
          show={showModal}
          onClose={() => setShowModal(false)}
          getItemCount={getItemCount}
          addToCart={props.addToCart}
          removeFromCart={props.removeFromCart}
          device={device}
          cart={props.cart}
        />
      </div>
    </div>
  );
};

export default Device;
